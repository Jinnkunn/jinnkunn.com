.firework-layer {
  position: fixed;
  inset: 0;
  z-index: 130;
  pointer-events: none;
  overflow: hidden;
}

.firework-layer__burst {
  position: absolute;
  left: 0;
  top: 0;
  width: 1px;
  height: 1px;
}

.firework-layer__particle,
.firework-layer__flash,
.firework-layer__core,
.firework-layer__mist {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  display: block;
}

.firework-layer__particle {
  width: var(--fw-size, 40px);
  height: var(--fw-size, 40px);
  background: url("/assets/firework.svg") center / contain no-repeat;
  opacity: var(--fw-opacity, 0.65);
  mix-blend-mode: screen;
  filter: drop-shadow(0 8px 24px rgba(148, 59, 36, 0.52));
  will-change: transform, opacity;
  animation:
    firework-particle var(--fw-duration, 1100ms) cubic-bezier(0.16, 0.84, 0.24, 1) forwards;
  animation-delay: calc(var(--fw-delay, 0ms));
}

.firework-layer__flash {
  width: var(--fw-flash-size, 76px);
  height: var(--fw-flash-size, 76px);
  background: radial-gradient(
    circle,
    rgba(255, 247, 222, 0.78) 0%,
    rgba(223, 217, 191, 0.44) 44%,
    rgba(223, 217, 191, 0) 74%
  );
  animation: firework-flash 680ms ease-out forwards;
}

.firework-layer__core {
  width: var(--fw-core-size, 62px);
  height: var(--fw-core-size, 62px);
  border-radius: 999px;
  background: radial-gradient(
    circle,
    rgba(255, 253, 239, 0.98) 0%,
    rgba(255, 236, 186, 0.84) 38%,
    rgba(225, 168, 78, 0.45) 68%,
    rgba(223, 148, 79, 0) 100%
  );
  mix-blend-mode: screen;
  filter: blur(1px);
  animation: firework-core 420ms cubic-bezier(0.17, 0.89, 0.32, 1) forwards;
}

.firework-layer__mist {
  width: var(--fw-mist-size, 196px);
  height: var(--fw-mist-size, 196px);
  border-radius: 999px;
  background: radial-gradient(circle,
    rgba(255, 255, 255, 0.34) 0%,
    rgba(223, 217, 191, 0.2) 34%,
    rgba(223, 217, 191, 0) 68%);
  filter: blur(7px);
  transform-origin: center;
  animation: firework-mist 620ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes firework-particle {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.08) rotate(var(--fw-rot, 0deg));
  }

  12% {
    opacity: var(--fw-opacity, 0.85);
    transform: translate(
      calc(-50% + calc(var(--fw-dx, 0px) * 0.12)),
      calc(-50% + calc(var(--fw-dy, 0px) * 0.12))
    ) scale(calc(var(--fw-scale, 0.22) * 0.45)) rotate(var(--fw-rot, 0deg));
  }

  100% {
    opacity: 0;
    transform: translate(
        calc(-50% + var(--fw-dx, 0px)),
        calc(-50% + var(--fw-dy, 0px))
      )
      scale(1.34)
      rotate(calc(var(--fw-rot, 0deg) + var(--fw-spin, 0deg)));
  }
}

@keyframes firework-flash {
  0% {
    opacity: 0.58;
    transform: translate(-50%, -50%) scale(0.52);
  }

  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.32);
  }
}

@keyframes firework-core {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.05);
  }

  35% {
    opacity: 0.98;
    transform: translate(-50%, -50%) scale(1.15);
  }

  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.28);
  }
}

@keyframes firework-mist {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.12);
  }

  18% {
    opacity: var(--fw-mist-opacity, 0.2);
    transform: translate(-50%, -50%) scale(0.95);
  }

  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.34);
  }
}

@media (max-width: 768px) {
  .firework-layer__particle {
    filter: drop-shadow(0 3px 10px rgba(148, 59, 36, 0.34));
  }

  .firework-layer__core {
    filter: blur(0.6px);
  }

  .firework-layer__mist {
    filter: blur(5px);
  }
}

@media (prefers-reduced-motion: reduce), print {
  .firework-layer {
    display: none !important;
  }
}
