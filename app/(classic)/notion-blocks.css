/* Classic Notion block refinements: code, toggles, callouts, equations, tables. */

/* Notion code blocks: make copy usable on touch and provide "Copied" feedback. */
.notion-code__copy-button {
  /* Ensure it paints above the <pre> (in DOM order the <pre> comes later). */
  z-index: 2;
}

.notion-code:focus-within .notion-code__copy-button {
  opacity: 1;
  pointer-events: all;
}

@media (hover: none) {
  .notion-code .notion-code__copy-button {
    opacity: 1;
    pointer-events: all;
  }
}

.notion-code__copy-button[data-copied="true"] {
  opacity: 1;
  pointer-events: all;
  background: var(--color-bg-yellow);
}

.notion-code__copy-button[data-copied="true"]:hover {
  background: var(--color-bg-yellow);
}

/* Notion toggles: visible keyboard focus + basic touch feedback (v1-consistent). */
.notion-toggle__summary:focus-visible {
  outline: 2px solid rgba(46, 170, 220, 0.7);
  outline-offset: 2px;
  border-radius: 6px;
}

.notion-toggle__trigger[role="button"]:focus-visible {
  outline: 2px solid rgba(46, 170, 220, 0.7);
  outline-offset: 2px;
  border-radius: 6px;
}

@media (hover: none) {
  .notion-toggle__summary {
    -webkit-tap-highlight-color: transparent;
  }

  .notion-toggle__summary:active {
    background: rgba(55, 53, 47, 0.06);
    border-radius: 6px;
  }
}

/* Toggles: subtle content entrance (no height animation). */
@media (prefers-reduced-motion: no-preference) {
  .notion-toggle.open > .notion-toggle__content {
    animation: toggle-content-in 260ms cubic-bezier(0.16, 1, 0.3, 1) both;
    will-change: transform, opacity;
  }
}

@keyframes toggle-content-in {
  from {
    opacity: 0;
    transform: translateY(-3px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Standard typography: captions + meta a bit smaller, references like footnotes. */
.notion-caption {
  font-size: var(--v1-type-small);
  color: rgba(55, 53, 47, 0.78);
}

.notion-page__properties {
  font-size: var(--v1-type-small);
}

/* Improve contrast for metadata labels (Date / Author / etc.) on content pages. */
.notion-page__property-name > span {
  color: rgba(55, 53, 47, 0.78);
}

/* Super custom CSS parity (original site):
 * Keep quote content the same size as body text (otherwise `--quote-size`
 * makes quote children feel oversized, especially inside toggles).
 */
.notion-quote > * {
  font-size: 16px;
}

.notion-toggle[data-toggle-kind="references"] .notion-toggle__content {
  font-size: var(--v1-type-ref);
  line-height: 1.55;
}

.notion-toggle[data-toggle-kind="references"] .notion-list-item {
  margin: 0.25em 0;
}

.notion-toggle[data-toggle-kind="references"] .notion-quote,
.notion-toggle[data-toggle-kind="references"] .notion-text__content {
  font-size: inherit;
}

/* Inline code on light pages needs stronger contrast for readability and WCAG. */
.notion-semantic-string .code {
  color: #8b124d;
}

/* Notion callouts: tighter alignment and better mobile spacing (v1-consistent). */
.notion-callout {
  align-items: flex-start;
  gap: 10px;
}

.notion-callout .notion-callout__icon {
  top: 0; /* avoid baseline drift on multi-line callouts */
  margin-top: 2px;
  flex: 0 0 auto;
}

.notion-callout .notion-callout__content {
  margin-inline-start: 0; /* gap handles spacing */
  min-width: 0;
}

@media (max-width: 546px) {
  .notion-callout {
    gap: 8px;
  }
}

/* Equations: make horizontal overflow usable on mobile/iOS (avoid layout break). */
.notion-equation__block {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
}

.notion-equation.notion-equation__inline {
  max-width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Tables/collections: smooth horizontal scroll on touch, prevent scroll chaining. */
.notion-table__wrapper,
.notion-collection-table__wrapper {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
}

.notion-code pre {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
}

/* Prism token colors (light) tuned to Notion code blocks. */
.notion-code .token.comment,
.notion-code .token.prolog,
.notion-code .token.doctype,
.notion-code .token.cdata {
  color: rgba(55, 53, 47, 0.55);
}

.notion-code .token.punctuation {
  color: rgba(55, 53, 47, 0.92);
}

.notion-code .token.namespace {
  opacity: 0.7;
}

.notion-code .token.property,
.notion-code .token.tag,
.notion-code .token.constant,
.notion-code .token.symbol,
.notion-code .token.deleted {
  color: #d73a49;
}

.notion-code .token.boolean,
.notion-code .token.number {
  color: #005cc5;
}

.notion-code .token.selector,
.notion-code .token.attr-name,
.notion-code .token.string,
.notion-code .token.char,
.notion-code .token.builtin,
.notion-code .token.inserted {
  color: #22863a;
}

.notion-code .token.operator,
.notion-code .token.entity,
.notion-code .token.url {
  color: #b15c00;
}

.notion-code .token.atrule,
.notion-code .token.attr-value,
.notion-code .token.keyword {
  color: #6f42c1;
}

.notion-code .token.function,
.notion-code .token.class-name {
  color: #005cc5;
}

.notion-code .token.regex,
.notion-code .token.important,
.notion-code .token.variable,
.notion-code .token.table-header {
  color: #8a3f00;
}

.notion-code .token.table-header.important {
  color: #5f2700 !important;
}

.notion-code .token.bold {
  font-weight: 700;
}
.notion-code .token.italic {
  font-style: italic;
}

/* Optional: make long tables easier to read on desktop with sticky headers. */
@media (min-width: 900px) {
  .notion-collection-table th {
    position: sticky;
    top: calc(var(--navbar-height) + 12px);
    z-index: 2;
    background: var(--color-bg-default);
  }

  .notion-table.col-header tr:first-child td {
    position: sticky;
    top: calc(var(--navbar-height) + 12px);
    z-index: 2;
    background: var(--color-bg-default);
  }
}
